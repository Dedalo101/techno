<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>ü§ñ AI TECHNO Generator - Updated</title>
<style>
body{background:#000;color:#0f0;font-family:'Courier New',monospace;margin:0;padding:20px}
*{box-sizing:border-box}
.container{max-width:600px;margin:0 auto;text-align:center}
h1{font-size:2em;text-transform:uppercase;margin-bottom:30px}
.notice{background:#333;border:2px solid #ff0;color:#ff0;padding:20px;margin:20px 0;border-radius:5px}
.option{background:#111;border:1px solid #0f0;padding:15px;margin:10px 0;border-radius:5px}
button{background:#111;color:#0f0;border:1px solid #0f0;padding:12px 24px;margin:5px;font-family:inherit;cursor:pointer;font-size:16px}
button:hover{background:#0f0;color:#000}
</style></head>
<body>
<div class="container">
<h1>ü§ñ AI TECHNO GENERATOR</h1>

<div class="notice">
‚ö° <strong>NEW VERSION AVAILABLE!</strong><br>
The old Suno API version has connection issues.<br>
Switch to the new local server version for better performance.
</div>

<div class="option">
<h3>üè† LOCAL VERSION (RECOMMENDED)</h3>
<p>‚úÖ 6 TECHNO styles working<br>‚úÖ Mock server included<br>‚úÖ No API limits</p>
<button onclick="openLocal()">üöÄ OPEN LOCAL VERSION</button>
</div>

<div class="option">
<h3>üåê WEB VERSION (LIMITED)</h3>
<p>‚ö† May have API connection issues<br>‚ö† Requires external API keys</p>
<button onclick="continueOld()">üì± CONTINUE WITH WEB</button>
</div>

<div id="oldInterface" style="display:none">
<h2>Web Version (Limited)</h2>
<div class="generator">
<select id="subgenre">
<option value="minimal">Minimal Techno</option>
<option value="acid">Acid Techno</option>
<option value="hard">Hard Techno</option>
<option value="melodic">Melodic Techno</option>
<option value="dub">Dub Techno</option>
</select>
<input type="text" id="prompt" placeholder="Dark warehouse, 130 BPM..." value="TECHNO">
<button onclick="generateTrack()">GENERATE TRACK</button>
<button onclick="showSettings()">‚öôÔ∏è API</button>
<div id="progress" class="progress"></div>
<div id="result"></div>
<p id="quota">Songs left: <span id="quota-count">10</span></p>
</div>
</div>
</div>

<script>
function openLocal() {
    window.open('http://localhost:8000/index_udio.html', '_blank');
}

function continueOld() {
    document.getElementById('oldInterface').style.display = 'block';
}
const SUNO_COOKIE = 'eyJhbGciOiJSUzI1NiIsImNhdCI6ImNsX0I3ZDRQRDExMUFBQSIsImtpZCI6Imluc18yT1o2eU1EZzhscWRKRWloMXJvemY4T3ptZG4iLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJzdW5vLWFwaSIsImF6cCI6Imh0dHBzOi8vc3Vuby5jb20iLCJleHAiOjE3NjEwNTc4MDAsImZ2YSI6WzAsLTFdLCJodHRwczovL3N1bm8uYWkvY2xhaW1zL2NsZXJrX2lkIjoidXNlcl8zNE5WbVZsZk5NTFR4UWQ1YWpvbDNZdnFIaE4iLCJodHRwczovL3N1bm8uYWkvY2xhaW1zL2VtYWlsIjoiYXp4Y3Z0cmV3QGdtYWlsLmNvbSIsImh0dHBzOi8vc3Vuby5haS9jbGFpbXMvcGhvbmUiOm51bGwsImlhdCI6MTc2MTA1NDIwMCwiaXNzIjoiaHR0cHM6Ly9jbGVyay5zdW5vLmNvbSIsImp0aSI6IjhhNDIyYTUzOTdkNDhlZDI5NWZlIiwibmJmIjoxNzYxMDU0MTkwLCJzaWQiOiJzZXNzXzM0TlZtWDhjZUo0SUhsdElxWFJGdHlLZWFmZCIsInN0cyI6ImFjdGl2ZSIsInN1YiI6InVzZXJfMzROVm1WbGZOTUxUeFFkNWFqb2wzWXZxSGhOIn0.NWjhr7jekVmkw74E0XInhB8dNpgrfWMFSA1Btyevmy0pN2IksvCa0nWumqsl_Gw63yakxbe2LIUKS2jczQCte7I01ItdXRX3MxhTV0G-_INSjtrXsHo1KP9s1VACFm1hZyEPbb3Ldu0j8Bi21k1s1rFTW-2GBepg4nUiRqB9PuuK48s7-IZ2_NpZjvv7_UQ9Y_OckwdgOz851Lt2Qf3CmlKimozp76i0kw1vEnvFOVb6zoPgSmF28Ql2mdylWxzMkO4AwuFkr0RbMv2-F-tSKP9VQtfWF3tyTy7-jqpDQWeCVVU6J5FIt3EU20POZR80hv0UOaQiFqeuTtPiIaXWcg';

function getApiKey() {
    return localStorage.getItem('suno-api-key') || SUNO_COOKIE;
}

function showSettings() {
    const currentKey = localStorage.getItem('suno-api-key') || '';
    const result = document.getElementById('result');
    result.innerHTML = `
        <h3>‚öôÔ∏è API Settings</h3>
        <p style="font-size:0.9em;opacity:0.8;margin:10px 0">Enter your Suno API key if the default isn't working:</p>
        <input type="password" id="api-key-input" placeholder="Suno API JWT Token..." value="${currentKey}" style="width:100%;font-size:12px;margin:10px 0">
        <br>
        <button onclick="saveApiKey()" style="background:#0f0;color:#000;margin:5px">üíæ SAVE</button>
        <button onclick="clearApiKey()" style="background:#f50;color:#fff;margin:5px">üóëÔ∏è CLEAR</button>
        <button onclick="hideSettings()" style="background:#333;margin:5px">‚ùå CLOSE</button>
        <br><br>
        <p style="font-size:0.8em;opacity:0.6">
            üí° Get your API key from: <br>
            ‚Ä¢ suno.com (login required)<br>
            ‚Ä¢ Check browser cookies for 'sunoaitoken'<br>
            ‚Ä¢ Or use developer tools to extract JWT
        </p>
    `;
}

function saveApiKey() {
    const key = document.getElementById('api-key-input').value.trim();
    if (key) {
        localStorage.setItem('suno-api-key', key);
        document.getElementById('result').innerHTML = '‚úÖ API key saved! Try generating a track now.';
    } else {
        document.getElementById('result').innerHTML = '‚ùå Please enter a valid API key.';
    }
}

function clearApiKey() {
    localStorage.removeItem('suno-api-key');
    document.getElementById('result').innerHTML = 'üóëÔ∏è API key cleared. Using default key.';
}

function hideSettings() {
    document.getElementById('result').innerHTML = '';
}

const TECHNO_TEMPLATES = {
    minimal: "stripped minimal techno, hypnotic repetition, 130 BPM",
    acid: "acid techno, TB-303 squelch, driving rhythm",
    hard: "hard techno, 160 BPM, aggressive kicks",
    melodic: "melodic techno, emotional synths, uplifting",
    dub: "dub techno, echoey reverb, atmospheric"
};

async function generateTrack() {
    const subgenre = document.getElementById('subgenre').value;
    const prompt = document.getElementById('prompt').value || 'TECHNO track';
    const fullPrompt = `Industrial techno ${prompt}, ${TECHNO_TEMPLATES[subgenre]}, heavy distorted kicks, mechanical percussion, dark atmosphere, 128 BPM`;
    const progress = document.getElementById('progress');
    const result = document.getElementById('result');
    
    progress.innerHTML = '<div class="loading"></div>';
    result.innerHTML = 'üîÑ Generating techno...';
    
    try {
        // Try multiple API endpoints with and without proxies
        const apis = [
            'https://suno-api-zeta-wine.vercel.app/api/generate',
            'https://suno.gcui.ai/api/generate', 
            'https://suno-api.vercel.app/api/generate'
        ];
        
        const proxies = [
            '', // Direct connection first
            'https://thingproxy.freeboard.io/fetch/',
            'https://corsproxy.io/?'
        ];
        
        let response = null;
        let lastError = null;
        
        for (const api of apis) {
            for (const proxy of proxies) {
                try {
                    const url = proxy + api;
                    response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${getApiKey()}`
                        },
                        body: JSON.stringify({
                            prompt: fullPrompt,
                            make_instrumental: true,
                            wait_audio: true
                        })
                    });
                    
                    if (response.ok) break;
                    lastError = `HTTP ${response.status}`;
                } catch (e) {
                    lastError = e.message;
                    continue;
                }
            }
            if (response && response.ok) break;
        }
        
        if (!response || !response.ok) {
            throw new Error(`API unavailable: ${lastError}`);
        }
        
        const data = await response.json();
        
        if (data && data[0] && data[0].audio_url) {
            result.innerHTML = `
                <h3>‚úÖ ${data[0].title || 'TECHNO Track'}</h3>
                <audio controls src="${data[0].audio_url}"></audio><br>
                <a href="${data[0].audio_url}" download="techno-track.mp3">üíæ DOWNLOAD MP3</a>
            `;
            updateQuota();
        } else {
            throw new Error('No audio generated - try again');
        }
        
    } catch (e) {
        console.error('Generation Error:', e);
        result.innerHTML = `
            ‚ùå ${e.message}
            <br><br>üîß <strong>Try these solutions:</strong>
            <br>1. Click ‚öôÔ∏è API button to add your own API key
            <br>2. Check if you have Suno.com account access
            <br>3. Try again in a few minutes
            <br><br>üì∫ <em>Sample TECHNO track (demo):</em>
            <br><audio controls>
                <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" type="audio/wav">
                Your browser does not support audio.
            </audio>
            <br><br>üîÑ <button onclick="location.reload()" style="background:#0f0;color:#000;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-family:inherit">TRY AGAIN</button>
        `;
    } finally {
        progress.innerHTML = '';
    }
}

function updateQuota() {
    let quota = parseInt(localStorage.getItem('techno-quota') || 10);
    quota = Math.max(0, quota - 1);
    localStorage.setItem('techno-quota', quota);
    document.getElementById('quota-count').textContent = quota;
    if (quota === 0) alert('Daily limit reached!');
}

document.addEventListener('DOMContentLoaded', () => {
    const quota = parseInt(localStorage.getItem('techno-quota') || 10);
    document.getElementById('quota-count').textContent = quota;
});
</script></body></html>
